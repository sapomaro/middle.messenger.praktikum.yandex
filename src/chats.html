<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Чаты</title>
	<link href="main.css" rel="stylesheet">
</head>
<body>
	<div class="popup">
		<div class="container container_narrow">
			<form name="avatar">
				<h1 class="container__header">Добавить пользователя</h1>
				<br>
				<div class="form__element">
					<input name="user" type="text" class="form__input__field form__input__field_standard" 
						value="" oninput="this.setAttribute('value', this.value);">
					<label class="form__input__label">Логин</label>
					<span class="form__input__error"></span>
				</div>
				<br>
				<div class="form__element form__element_centered">
					<button class="form__button form__button_standard">Добавить</button>
					<br><br>
				</div>
			</form>
			
		</div>
	</div>
	<div class="root">
		<aside class="sidebar sidebar_chatlist scrollable">
			<div class="chatlist__controls">
				<div class="form__element form__text_right">
					<a href="profile.html" class="form__link form__link_grey">Профиль&ensp;<small>❯</small></a>
				</div>
				<div class="form__element">
					<div class="form__element_grey form__element_rounded">
						<input name="search" type="text" class="form__input__field chatlist__search__field" 
							value="" oninput="this.setAttribute('value', this.value);">
						<label class="chatlist__search__label">
							<img src="../public/search_icon.svg" width="22" height="22"> <span class="chatlist__search__label__text">Поиск</span>
						</label>
					</div>
					
				</div>
			</div>
			<div class="chatlist__item">
				<div class="chatlist__item__wrapper">
					<div class="chatlist__item__avatar"></div>
					<div class="chatlist__item__text">
						<div class="chatlist__item__name">Андрей</div>
						<div class="chatlist__item__message">
							<span class="chatlist__item__message__quote">Изображение</span>
						</div>
					</div>
					<div class="chatlist__item__info">
						<div class="chatlist__item__time">10:49</div>
						<div class="chatlist__item__unreads">
							<span class="chatlist__item__unreads__count">2</span>
						</div>
					</div>
				</div>
			</div>
			
			<div class="chatlist__item chatlist__item_active">
				<div class="chatlist__item__wrapper">
					<div class="chatlist__item__avatar"></div>
					<div class="chatlist__item__text">
						<div class="chatlist__item__name">Илья</div>
						<div class="chatlist__item__message">
							<span class="chatlist__item__message__quote">Друзья, у меня для вас особенный выпуск новостей!...</span>
						</div>
					</div>
					<div class="chatlist__item__info">
						<div class="chatlist__item__time">15:12</div>
						<div class="chatlist__item__unreads">
							<span class="chatlist__item__unreads__count">4222</span>
						</div>
					</div>
				</div>
			</div>
			
			<div class="chatlist__item">
				<div class="chatlist__item__wrapper">
					<div class="chatlist__item__avatar"></div>
					<div class="chatlist__item__text">
						<div class="chatlist__item__name">Design Destroyer</div>
						<div class="chatlist__item__message">
							<span class="chatlist__item__message__quote">В 2008 году художник Jon Rafman  начал собирать...</span>
						</div>
					</div>
					<div class="chatlist__item__info">
						<div class="chatlist__item__time">Пн</div>
						<div class="chatlist__item__unreads">
							<span class="chatlist__item__unreads__count"></span>
						</div>
					</div>
				</div>
			</div>
			
		</aside>
		
		
		
		
		
		<main class="container container_chatbox scrollable">
			
			
			
				<div class="chatbox__header">
					<div class="chatbox__header__avatar"></div>
					<h2 class="chatbox__header__text">${chat.name}</h2>
					
					<label class="chatbox__header__control">
						<input type="checkbox" class="form__toggle form__element_hidden">
						<a class="form__button form__button_round form__button_blank form__button_bigfont">⋮</a>
						<span class="chatbox__dropdown chatbox__dropdown_top">
							<span class="chatbox__dropdown__menu">
								<span class="form__element form__control" onclick="showPopup(event)">
									<span class="form__element_circled">+</span> Добавить пользователя
								</span>
								<span class="form__element form__control">
									<span class="form__element_circled">×</span> Удалить пользователя
								</span>
							</span>
						</span>
					</label>

				</div>
				
				
				
				
				<div class="chatbox__body">
					<div class="chatbox__date">19 июня (вс)</div>
					<div class="chatbox__message chatbox__message_inc">
<span class="chatbox__message__text">Привет! Смотри, тут всплыл интересный кусок лунной космической истории — НАСА в какой-то момент попросила Хассельблад адаптировать модель SWC для полетов на Луну. Сейчас мы все знаем что астронавты летали с моделью 500 EL — и к слову говоря, все тушки этих камер все еще находятся на поверхности Луны, так как астронавты с собой забрали только кассеты с пленкой.

Хассельблад в итоге адаптировал SWC для космоса, но что-то пошло не так и на ракету они так никогда и не попали. Всего их было произведено 25 штук, одну из них недавно продали на аукционе за 45000 евро.</span>
						<span class="chatbox__message__info">
							<time class="chatbox__message__time">11:56</time>
						</span>
					</div>
					<div class="chatbox__message chatbox__message_out">
						<span class="chatbox__message__text">Круто!</span>
						<span class="chatbox__message__info">
							<span class="chatbox__message__status">✓✓&nbsp;</span>
							<time class="chatbox__message__time">12:00</time>
						</span>
					</div>
					
				</div>
				
				
				
				
				
				
				<form name="send" class="chatbox__footer">
					<label for="chatbox__dropdown_bottom1" class="chatbox__footer__control">
						<input id="chatbox__dropdown_bottom1" type="checkbox" class="form__toggle form__element_hidden">
						<a class="form__button form__button_fileclip"></a>
						<span class="chatbox__dropdown chatbox__dropdown_bottom">
							<span class="chatbox__dropdown__menu">
								<span class="form__element form__control">
									<img src="../public/photo_icon.svg" width="22" height="22"
										class="form__icon"> Фото или видео
								</span>
								<span class="form__element form__control">
									<img src="../public/file_icon.svg" width="22" height="22"
										class="form__icon"> Файл
								</span>
								<span class="form__element form__control">
									<img src="../public/location_icon.svg" width="22" height="22"
										class="form__icon"> Локация
								</span>
							</span>
						</span>
					</label>
					<textarea name="message" class="form__textarea form__element_grey" rows="1" data-placeholder="Сообщение..."></textarea>
					<button type="button" class="form__button form__button_standard form__button_round form__button_send">➜</button>
				</form>
		</main>
	</div>
	<script type="text/javascript">
	
		const sendForm = document.forms.send;
		const messageField = document.forms.send.message;
		
		messageField.togglePlaceholder = (event = {}) => {
			if (messageField.dataset && event.type) {
				const placeholder = messageField.dataset.placeholder;
				if (placeholder) {
					if (event.type === 'blur' && messageField.value === '') {
						messageField.value = placeholder;
					}
					else if (event.type === 'focus' && messageField.value === placeholder) {
						messageField.value = '';
					}
				}
			}

		};
		messageField.autoResize = () => {
			const style = messageField.currentStyle || window.getComputedStyle(messageField);
			const boxSizing = (style.boxSizing === 'border-box')
				? parseInt(style.borderBottomWidth, 10) + parseInt(style.borderTopWidth, 10) : 0;
			
			messageField.style.overflowY = 'hidden';
			messageField.style.height = 'auto';
			messageField.style.height = (messageField.scrollHeight + boxSizing) + 'px'; 
		};
		
		messageField.addEventListener('input', (event) => {
			messageField.autoResize();
		});
		messageField.addEventListener('focus', (event) => {
			messageField.togglePlaceholder(event);
		});
		messageField.addEventListener('blur', (event) => {
			messageField.togglePlaceholder(event);
		});
		
		messageField.togglePlaceholder({ type: 'blur' });
		messageField.autoResize();
			
		const popup = document.querySelector('.popup');
		const showPopup = (event) => {
			popup.style.display = 'flex';
		};
		popup.addEventListener('click', (event) => {
			if (event.target === popup) {
				popup.style.display = 'none';
			}
		});

	</script>
</body>
</html> 