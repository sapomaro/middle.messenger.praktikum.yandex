<!DOCTYPE html>
<script type="module">
	import {ProtoPages} from '/src/modules/ProtoPages.js';
	
  import '/src/layouts/Narrow.js';
  
  import '/src/components/forms/common.scss';

  import {Form} from '/src/components/forms/Form.js';
  import {StandardInput as Input} from '/src/components/forms/StandardInput.js';
  import {StandardButton as Button} from '/src/components/forms/StandardButton.js';
  import {StandardLink as Link} from '/src/components/forms/StandardLink.js';


  const context = {Form, Input, Button, Link};

  context.title = 'Регистрация';

  const inputs = ProtoPages.JSON.stringify([
    { name: 'email', type: 'email', label: 'Почта' },
    { name: 'login', type: 'text', label: 'Логин' },
    { name: 'first_name', type: 'text', label: 'Имя' },
    { name: 'second_name', type: 'text', label: 'Фамилия' },
    { name: 'phone', type: 'tel', label: 'Телефон' },
    { name: 'password', type: 'password', label: 'Пароль' },
    { name: 'password2', type: 'password', label: 'Пароль (ещё раз)' }
  ]);
  
  context.contents = `%{ Form({ "name": "reg", "action": "chats.html" }) }%`;

  context.fieldset = () => `
    <h1 class="container__header">%{title}%</h1>
    %{ Input(${inputs}...) }%
    <br><br>
    %{ Button({ "name": "submit", "type": "submit", "label": "Зарегистрироваться" }) }%
    %{ Link({ "url": "auth.html", "label": "Войти" }) }%
  `;

  ProtoPages.compile(context);
    
</script>
