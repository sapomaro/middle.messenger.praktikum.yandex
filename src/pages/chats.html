<!DOCTYPE html>
<script type="module">
	import {ProtoPages} from '/src/modules/ProtoPages.js';
	
	import '/src/layouts/Chats.js';
	
  import { StandardInput as Input } from '/src/components/forms/StandardInput.js';
  import { StandardButton as Button } from '/src/components/forms/StandardButton.js';
  
  import { ChatlistItem } from '/src/components/chats/ChatlistItem.js';
  import { ChatlistControls } from '/src/components/chats/ChatlistControls.js';
  import { ChatboxMessage } from '/src/components/chats/ChatboxMessage.js';
  import { ChatboxHeader } from '/src/components/chats/ChatboxHeader.js';
  import { ChatboxFooter } from '/src/components/chats/ChatboxFooter.js';
  
  const context = { 
    Input, Button, 
    ChatlistItem, ChatlistControls, 
    ChatboxMessage, ChatboxHeader, ChatboxFooter 
  };
  
  context.title = 'Чаты';
  
  context.user = 'Собеседник';
  
  const chats = ProtoPages.JSON.stringify([
    { user: 'Андрей', quote: 'Изображение', when: '10:49', unreads: 2, active: true },
    { user: 'Илья', quote: 'Друзья, у меня для вас особенный выпуск новостей!...', when: '15:12', unreads: 4222 },
    { user: 'Design Destroyer', quote: 'В 2008 году художник Jon Rafman  начал собирать...', when: 'Пн', unreads: 0 },
  ]);
  const messages = ProtoPages.JSON.stringify([
    { type: 'inc', when: '11:56', text: `Привет! Смотри, тут всплыл интересный кусок лунной космической истории — НАСА в какой-то момент попросила Хассельблад адаптировать модель SWC для полетов на Луну. Сейчас мы все знаем что астронавты летали с моделью 500 EL — и к слову говоря, все тушки этих камер все еще находятся на поверхности Луны, так как астронавты с собой забрали только кассеты с пленкой.

Хассельблад в итоге адаптировал SWC для космоса, но что-то пошло не так и на ракету они так никогда и не попали. Всего их было произведено 25 штук, одну из них недавно продали на аукционе за 45000 евро.` },
    { type: 'out', when: '12:00', status: 1, text: 'Круто!' }
  ]);
  
  
  context.Chatlist = () => `
    %{ ChatlistControls }%
    <ul>
      %{ ChatlistItem(${chats}...) }%
    </ul>
  `; 

  
  
  context.ChatboxBody = () => `
    <div class="chatbox__date">19 июня (вс)</div>
    
    %{ ChatboxMessage(${messages}...) }%
  `;


  context.popup = () => `
    <form name="addUser">
      <h1 class="container__header">Добавить пользователя</h1>
      <br>
      %{ Input({ "name": "user", "label": "Логин" }) }%
      <br>
      %{ Button({ "name": "add", "label": "Добавить" }) }%
    </form>
  `;
  
  ProtoPages.compile(context);

</script>
